@wizard
; add_property($system, "r1", create($nothing, $nothing, 0), {#3, "rwc"});
; add_property($system, "r2", create($nothing, $nothing, 0), {#3, "rwc"});

// Store the IDs we got
; add_property($system, "id1", $r1, {#3, "rwc"});
; add_property($system, "id2", $r2, {#3, "rwc"});

// Test 1: Renumber to a hole
; recycle($r1);
; return $system.r2 = renumber($r2);
$id1

// Test 2: Renumber again (should stay same if no hole)
; return $system.r2 = renumber($r2);
$id1

// Test 3: Renumber to specific ID
// First create a hole at $id2 by creating something there and recycling it
; recycle(create_at($id2, $nothing));
; return $system.r2 = renumber($r2, $id2);
$id2

// Test 4: Renumber to next available (max + 1)
; add_property($system, "max_obj", max_object(), {#3, "rwc"});
; add_property($system, "r3", renumber($r2, 0), {#3, "rwc"});
; return tonum($r3) > tonum($max_obj);
1

// Test 5: UUID creation and renumbering back to numeric
; add_property($system, "ruuid", create($nothing, $nothing, 2), {#3, "rwc"});
; return typeof($ruuid) == TYPE_OBJ;
1
; return tonum(renumber($ruuid, 0)) >= 0;
1

// Test 6: Numeric to UUID
; add_property($system, "num_obj", create($nothing, $nothing, 0), {#3, "rwc"});
; add_property($system, "ruuid_from_num", renumber($num_obj, 2), {#3, "rwc"});
; return typeof($ruuid_from_num) == TYPE_OBJ;
1

// Test 7: UUID to UUID
; add_property($system, "ruuid2", create($nothing, $nothing, 2), {#3, "rwc"});
; add_property($system, "ruuid3", renumber($ruuid2, 2), {#3, "rwc"});
; return typeof($ruuid3) == TYPE_OBJ;
1
